<div fxLayout="row" fxLayoutGap="20px">
  <form [formGroup]="searchForm">
    <mat-form-field appearance="legacy">
      <mat-label>Search Account</mat-label>
      <input
        #searchText
        matInput
        formControlName="searchString"
        (keyup)="onKeyUp(searchText.value)"
      />
    </mat-form-field>
    <button mat-stroked-button style="margin-left: 20px;" class="button-create-page">
      Search
    </button>
  </form>
</div>
<div fxLayout="row" style="height:40vh; overflow: scroll;">
  <table mat-table [dataSource]="dataSource" style="width: 100%;">
    <ng-container matColumnDef="select">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let row">
        <mat-checkbox
          (click)="$event.stopPropagation()"
          (change)="$event ? toggleSelection(row) : null"
          [checked]="selection.isSelected(row)"
        >
        </mat-checkbox>
      </td>
    </ng-container>
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef>ID</th>
      <td mat-cell *matCellDef="let account">{{ account.id }}</td>
    </ng-container>
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>NAME</th>
      <td mat-cell *matCellDef="let account">{{ account.name }}</td>
    </ng-container>
    <ng-container matColumnDef="mobile">
      <th mat-header-cell *matHeaderCellDef>MOBILE</th>
      <td mat-cell *matCellDef="let account">{{ account.mobile }}</td>
    </ng-container>
    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef>E-MAIL</th>
      <td mat-cell *matCellDef="let account">{{ account.email }}</td>
    </ng-container>
    <ng-container matColumnDef="address">
      <th mat-header-cell *matHeaderCellDef>ADDRESS</th>
      <td mat-cell *matCellDef="let account">
        {{ (account?.addresses)[0]?.address1 }},{{
          (account?.addresses)[0]?.address2
        }}, {{ (account?.addresses)[0]?.zip }}
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
    <tr
      mat-row
      *matRowDef="let row; columns: displayedColumns"
      [ngClass]="{ highlight: selectedRowIndex == row.id }"
      (click)="highlight(row)"
    ></tr>
  </table>
</div>
<div
  fxLayout="row"
  fxLayoutAlign="space-between end"
  style="padding-top: 20px;"
>
  <div fxLayout="column">
    <button mat-stroked-button mat-dialog-close>Cancel</button>
  </div>
  <div fxLayout="column">
    <button mat-stroked-button [disabled]="!selection.hasValue()" (click)="saveSelection()">Save</button
    >
  </div>
</div>
