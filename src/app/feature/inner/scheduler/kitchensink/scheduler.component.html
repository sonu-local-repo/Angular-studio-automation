<!-- <div mat-dialog-title class="flex-container">
  <h1>Scheduler</h1>
   <button mat-button class="close-icon" [mat-dialog-close]="true">
        <mat-icon>close</mat-icon>
    </button>
</div> -->
<!-- <div class="matero-page-header"> -->
<!-- <div fxLayout="row wrap" fxLayoutAlign="space-between center" style="margin-bottom: -10px;">
    <div fxLayout="column" fxFlex>
     
      <div fxLayout="row" style="padding-left: 18px; padding-bottom: 1.34375em;">
        <app-breadcrumb></app-breadcrumb>
      </div>
    </div>
    <div fxLayout="column" fxFlex>
      <div fxLayout="row" fxLayoutGap="20px" fxLayoutAlign="space-between center">
        <div fxLayout="column" fxFlex="80">
          
        </div>
        <div fxLayout="column" fxFlex>
          <div style="margin-top: 10px; margin-bottom:1.34375em">
            <button
              mat-raised-button
              class="button-create-page"
              (click)="newEvent()"
            >
              New Event
            </button>
          </div>
        </div>
      </div>
    </div>
  </div> -->
<app-page-scroll-layout>
  <div class="page-container">
    <div>
      <div
        fxLayout="row"
        fxLayoutAlign="space-between center"
        fxLayoutGap="20px"
        style="padding-top: 5px; padding-bottom: 15px;"
      >
        <div fxLayout="column" fxFlex="60">
          <div fxLayout="row" fxLayoutGap="20px">
            <div fxLayout="column" fxFlex="60">
              <app-breadcrumb></app-breadcrumb>
            </div>
            <div fxLayout="column" fxFlex>
              <div></div>
            </div>
          </div>
        </div>
        <div fxLayout="column">
          <div>
            <button
              mat-raised-button
              class="button-create-page"
              (click)="newEvent()"
            >
              Create Event
            </button>
          </div>
        </div>
      </div>
      <mat-divider></mat-divider>
    </div>
    <!-- HEADER -->
    <div fxLayout="row" style="border: 1px solid #e1e1e1; margin-top: 20px;">
      <div fxLayout="column" fxFlex="15">
        <div
          *ngIf="this.employeeList.length > 0"
          style="height: 100%; background-color: white; margin-bottom: 0px;"
        >
          <div
            style="
              padding-top: 20px;
              padding-bottom: 20px;
              padding-left: 10px;
              font-weight: bold;
            "
          >
            RESOURCES
          </div>

          <div>
            <div
              *ngFor="let item of this.employeeList"
              style="padding-left: 10px;"
            >
              <div fxLayout="row" fxLayoutGap="20px">
                <!-- <div > -->
                <div fxLayout="column" style="padding: 5px 0px;" fxFlex="80">
                  <mat-checkbox (click)="onEmployeeChange(item)">{{
                    item.name
                  }}</mat-checkbox>
                </div>
                <div fxLayout="column">
                  <mat-icon [style.color]="item.color"
                    >fiber_manual_record</mat-icon
                  >
                </div>
                <!-- </div> -->
              </div>
            </div>
          </div>
        </div>
      </div>
      <div fxLayout="column" fxFlex>
        <div fxLayout="row" fxLayoutAlign="space-around center">
          <div fxLayout="column">
            <div fxLayout="row">
              <button mat-button>
                <div
                  mwlCalendarPreviousView
                  [view]="view"
                  [(viewDate)]="viewDate"
                  (viewDateChange)="closeOpenMonthViewDay()"
                  fxFlex
                >
                  Previous
                </div>
              </button>
              <button mat-button>
                <div mwlCalendarToday [(viewDate)]="viewDate" fxFlex>
                  Today
                </div>
              </button>
              <button mat-button>
                <div
                  class="btn btn-primary"
                  mwlCalendarNextView
                  [view]="view"
                  [(viewDate)]="viewDate"
                  (viewDateChange)="closeOpenMonthViewDay()"
                  fxFlex
                >
                  Next
                </div>
              </button>
            </div>
          </div>
          <div fxLayout="column">
            <div [ngSwitch]="view">
              <div *ngSwitchCase="CalendarView.Month">
                <h2>{{ viewDate | date: "MMMM yyyy" }}</h2>
              </div>
              <div *ngSwitchCase="CalendarView.Day">
                <h2>{{ viewDate.toDateString() }}</h2>
              </div>
              <div *ngSwitchCase="CalendarView.Week">
                <h2>{{ viewDate | calendarDate: "weekViewTitle" }}</h2>
              </div>
            </div>
          </div>
          <div fxLayout="column">
            <div fxLayout="row">
              <button
                mat-button
                (click)="setView(CalendarView.Month)"
                [class.active]="view === CalendarView.Month"
              >
                Month
              </button>
              <button
                mat-button
                (click)="setView(CalendarView.Week)"
                [class.active]="view === CalendarView.Week"
              >
                Week
              </button>
              <button
                mat-button
                (click)="setView(CalendarView.Day)"
                [class.active]="view === CalendarView.Day"
              >
                Day
              </button>
            </div>
          </div>
        </div>
        <ng-template #customCellTemplate let-day="day" let-locale="locale">
          <div (dblclick)="setView(CalendarView.Week)">
            <div class="cal-cell-top">
              <span class="cal-day-badge" *ngIf="day.badgeTotal > 0">{{
                day.badgeTotal
              }}</span>
              <span class="cal-day-number">{{
                day.date | calendarDate: "monthViewDayNumber":locale
              }}</span>
            </div>
            <small style="margin: 5px;" *ngIf="day">
              <div *ngFor="let event_var of [day.events]">
                <!-- <span>{{event_var}}</span> -->

                <span *ngIf="event_var.length > 3; else displayall">
                  <div
                    *ngFor="let event of event_var.splice(0, 3)"
                    style="
                      background-color: #35addd;
                      width: 100%;
                      margin-bottom: 2px;
                      margin-left: 2px;
                    "
                  >
                    <div style="padding: 0 3px;">
                      <span *ngIf="event.employee !== null">
                        {{ event.start | date: "shortTime" }}
                        {{ event.title }} - Employee:
                        {{ event.employee.firstName }}
                        {{ event.employee.lastName }}
                      </span>
                    </div>
                  </div>
                </span>
                <ng-template #displayall>
                  <span>
                    <div
                      *ngFor="let event of day.events"
                      [style.background-color]="getColor(event.assignedId)"
                      style="
                        background-color: #e8fde7;
                        width: 100%;
                        margin-bottom: 2px;
                      "
                    >
                      <div style="padding: 0 3px;">
                        <span *ngIf="event.employee !== null">
                          {{ event.start | date: "shortTime" }}
                          {{ event.title }} - Employee:
                          {{ event.employee.firstName }}
                          {{ event.employee.lastName }}
                        </span>
                      </div>
                    </div>
                  </span>
                </ng-template>
              </div>
            </small>
          </div>
        </ng-template>
        <div class="calendar-body">
          <ng-template
            #weekViewHourSegmentTemplate
            let-segment="segment"
            let-locale="locale"
            let-segmentHeight="segmentHeight"
            let-isTimeLabel="isTimeLabel"
          >
            <div
              #segmentElement
              class="cal-hour-segment"
              [style.height.px]="segmentHeight"
              [class.cal-hour-start]="segment.isStart"
              [class.cal-after-hour-start]="!segment.isStart"
              [ngClass]="segment.cssClass"
              (dblclick)="startDragToCreate(segment, $event, segmentElement)"
              (eventTimesChanged)="eventTimesChanged($event)"
            >
              <div class="cal-time" *ngIf="isTimeLabel">
                {{ segment.date | calendarDate: "weekViewHour":locale }}
              </div>
            </div>
          </ng-template>

          <div [ngSwitch]="view">
            <mwl-calendar-month-view
              *ngSwitchCase="CalendarView.Month"
              [viewDate]="viewDate"
              [events]="events"
              [refresh]="refresh"
              [activeDayIsOpen]="activeDayIsOpen"
              (dayClicked)="dayClicked($event.day)"
              (eventClicked)="handleEvent('Clicked', $event.event)"
              [cellTemplate]="customCellTemplate"
            >
            </mwl-calendar-month-view>

            <mwl-calendar-day-view
              *ngSwitchCase="CalendarView.Day"
              [viewDate]="viewDate"
              [events]="events"
              [refresh]="refresh"
            >
            </mwl-calendar-day-view>
          </div>

          <mwl-calendar-week-view
            *ngIf="view === CalendarView.Week"
            [refresh]="refresh"
            [viewDate]="viewDate"
            [events]="events"
            [hourSegmentTemplate]="weekViewHourSegmentTemplate"
            [weekStartsOn]="weekStartsOn"
            (eventClicked)="eventClicked($event)"
          >
          </mwl-calendar-week-view>
        </div>
      </div>
    </div>

    <!-- CALENDER BODY -->

    <!-- CALENDAR CELL FORMATTING -->
  </div>
</app-page-scroll-layout>
